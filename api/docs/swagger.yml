openapi: 3.0.0
info:
  version: '1.0'
  title: Telephant API
  description: >-
    Telephantâ€™s APIs (Application Programming Interfaces) power its platform for
    exchanging airtime.
paths:
  /v1/accounts:
    get:
      summary: Get account(s).
      description: Get the details of a specific account(s). List one or all of the details of accounts available to this username.
      tags:
        - accounts
      security:
        - BearerAuth: []
      parameters:
      - in: header
        name: x-account-id
        description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
        schema:
          type: string
          format: uuid
        required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Create account.
      description: Create a new group account.
      tags:
        - accounts
      security:
        - BearerAuth: []
      requestBody:
        description: Define the properties of the account to create.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  maxLength: 50
                  example: My Company's Airtime Account
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    put:
      summary: Update account.
      description: Update the details of a group account.
      tags:
        - accounts
      security:
        - BearerAuth: []
      requestBody:
        description: Define the properties of the account to create.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  maxLength: 50
                  example: My Company's Airtime Account
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    delete:
      summary: Delete account.
      description: Delete a specific group account.
      tags:
        - accounts
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/airtime:
    get:
      summary: Get airtime balance.
      description: Check the balance of a group or individual accounts airtime balance.
      tags:
        - airtime
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Use airtime.
      description: Convert positive airtime balance for use as airtime on phone.
      tags:
        - airtime
      security:
        - BearerAuth: []
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/airtime/{ContactsPhoneNumber}:
    get:
      summary: Request airtime.
      description: Request airtime credit from a contact.
      tags:
        - airtime
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: ContactsPhoneNumber
          schema:
            type: string
            pattern: ^(27)[0-9]{9}$
          required: true
          description: A contact's unique mobile phone number from an accounts contacts list.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Send airtime.
      description: Send airtime credit to a contact.
      tags:
        - airtime
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: ContactsPhoneNumber
          schema:
            type: string
            pattern: ^(27)[0-9]{9}$
          required: true
          description: A contact's unique mobile phone number from an accounts contacts list.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/contacts:
    get:
      summary: List the contacts of an individual or group account.
      description: List the contacts for account  
      tags:
        - contacts
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Create contact.
      description: Create a contact for a individual or group account.
      tags:
        - contacts
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/contacts/{ContactsPhoneNumber}:
    get:
      summary: View specific contact.
      description: Get the details of a specific contact for an individual or group account.
      tags:
        - contacts
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: ContactsPhoneNumber
          schema:
            type: string
            pattern: ^(27)[0-9]{9}$
          required: true
          description: A contact's unique mobile phone number from an accounts contacts list.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    put:
      summary: Update specific contact.
      description: Update a specific contact for an individual or group account.
      tags:
        - contacts
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: ContactsPhoneNumber
          schema:
            type: string
            pattern: ^(27)[0-9]{9}$
          required: true
          description: A contact's unique mobile phone number from an accounts contacts list.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    delete:
      summary: Delete specific contact.
      description: Delete a specific contact for an individual or group account.
      tags:
        - contacts
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: ContactsPhoneNumber
          schema:
            type: string
            pattern: ^(27)[0-9]{9}$
          required: true
          description: A contact's unique mobile phone number from an accounts contacts list.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/notifications:
    get:
      summary: Get list of notifications.
      description: Get the list of notifications for an individual or group account.
      tags:
        - notifications
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary:  Mark unread notifications as read.
      description: Mark all unread notifications as read on an individual or group account.
      tags:
        - notifications
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/notifications/{NotificationID}:
    get:
      summary: View specific notification.
      description: Get the details of a specific notification for an individual or group account.
      tags:
        - notifications
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: NotificationID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the notification.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Mark notifcation as read.
      description: On an individual or group account, mark a specific notification as read.
      tags:
        - notifications
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: NotificationID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the notification.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    put:
      summary: Accept or reject airtime request.
      description: Accept or reject a specific airtime send request from a contact.
      tags:
        - notifications
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: NotificationID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the notification.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /ping:
    get:
      summary: Ping the API.
      description: To make sure the API is up and working, ping the server.
      tags:
        - ping
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/retailers:
    get:
      summary: Get retailers.
      description: Get a listing of Telephant retailers.
      tags:
        - retailers
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Create a retailer listing.
      description: Create a Telephant retailer listing.
      tags:
        - retailers
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: true
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/retailers/{RetailerID}:
    put:
      summary: Update retailer.
      description: Update a retailer listing.
      tags:
        - retailers
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: RetailerID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the retailer listing.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: true
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    delete:
      summary: Delete retailer.
      description: Delete a retailer listing.
      tags:
        - retailers
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: RetailerID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the retailer listing.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: true
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/transactions:
    get:
      summary: Get transactions.
      description: Get a transaction listing for an individual or group account.
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      tags:
        - transactions
      security:
        - BearerAuth: []
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/transactions/{TransactionID}:
    get:
      summary: View a transaction.
      description: View the details of a specific transaction for an individual or group account.
      tags:
        - transactions
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: TransactionID
          schema:
            type: string
            format: uuid
          required: true
          description: Unique ID of the transaction.
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
  /v1/users:
    post:
      summary: User authentication.
      description: Provides an end point to sign up as a user or log in.
      tags:
        - users
      parameters:
        - in: query
          name: action
          schema:
            type: string
            enum:
              - signup
              - login
          description: >
            User actions:
             * `signup` - Create a user account.
             * `login` - As a user, sign in.
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'  
  /v1/verifications:
    get:
      summary: Get verifications.
      description: Check the status of an individual or group account's verification.
      tags:
        - verifications
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    post:
      summary: Create verifications.
      description: Submit verification requirements on a per-account or per-group basis.
      tags:
        - verifications
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
    put:
      summary: Update verification.
      description: Update the verification requirementsÂ for a single account or a group account.
      tags:
        - verifications
      security:
        - BearerAuth: []
      parameters:
        - in: header
          name: x-account-id
          description: Clients can make requests as connected accounts using the special header x-account-id which should contain a Telephant account ID.
          schema:
            type: string
            format: uuid
          required: false
      responses:
        '401':
          $ref: '#/components/responses/Unauthorised'
        '404':
          $ref: '#/components/responses/NotFound'
        '5XX':
          $ref: '#/components/responses/ServerError'
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/wazby/TelephantAPI/1.0
  - description: https://api.telephant.co.za
    url: http://localhost:8080/v1

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
  schemas:
    NotFound:
      type: object
      properties:
        status_message: 
          type: string
          example: "The resource you requested could not be found."
        status_code:
          type: integer
          example: 404

    Unauthorised:
      type: object
      properties:
        status_message: 
          type: string
          example: "Unauthorised"
        status_code:
          type: integer
          example: 401

    ServerError:
      type: object
      properties:
        status_message: 
          type: string
          example: "Server error. Please try again later"
        status_code:
          type: integer
          example: 500

    Transactions:
      type: object
      required:
        - amount
        - sign
        - type
      properties:
        accountID:
          type: string
          format: uuid
        date-time:
          type: string
          format: date-time
        amount:
          type: number
        sign:
          type: boolean
        type:
          type: string
          enum:
            - SEND
            - RECEIVE
      description: The Transactions are represented in the form of the following JSON model.
  responses:
    NotFound:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotFound'
    Unauthorised:
      description: Unauthorised
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Unauthorised'
    ServerError:
      description: Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ServerError'